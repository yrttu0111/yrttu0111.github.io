---
layout: post
title: AWS EC2 storage
subtitle: AWS RDS
categories: AWS
tags: [AWS, ASS, RDS, storage]
date: 2023-07-02
---

# 근황
요즘 이직하고 바빴다.. 허허
재택은 참 좋다... ㅋㅋㅋㅋㅋ
그래도 틈틈이 공부를 하자!! 홧

# RDS
RDS는 관계형 데이터베이스의 약자다
Relational Database Service
RDBMS 그 잡체

sql은 데이터베이스를 쿼리하는 구조화된 언어
클라우드 RDS서비스에 db생성 하고 aws 가 관리함으로 혜택이 많다.

postgres, MySQL, MariaDB MSSQL Server ,aurora등 이있다.

AWS RES는 데이터베이스 뿐만아니라 다양한 서비스도 제공한다.(db만 제공하면 ec2랑 다를게 없을 듯?!)

데이터 베이스 프로비저닝과 기본 운영체제 패치가 완전 자동화 되어있다.
지속적으로 백업이 생성되므로 특정 타임스템프로 복원 할 수 있다.

데이터베이스 성능을 대시보드에서 모니터링 할 수 있고 읽기전용 복제본을 활용해 읽기 성능 개선을 할 수 있다. 

재해 복구 목적으로 다중 AZ를 설정할 수 있다.
인스턴스 유형을 늘려 수직 확장 또는 복제본을 추가하여 수평확장 가능

파일 스토리지는 EBS에 구성
gp2와 io1 볼륨이 있다.

한 가지 단점은 ssh로 인스턴스에 엑세스 할 수 없다는 점 이다.
기본 ec2 인스턴스에는 엑세스 할 수 없다.
하지만 그렇게 큰 단점은 아닌게
배포할 때 설정할 모든것을 AWS에서 제공하기 때문이다.

# RDS - Stroage Auto Scaling
db만들때 20 기가로 설정했는데
데이터 베이스를 많이 사용하면 공간이 부족해 질 수 있다.
이때 오토 스케일링 기능이 활성화 되어있으면 RDS가
감지해서 자동으로 화장해 준다.
db를 다운시키는 등의 작업을 할 필요가 없다.
이를 위해 최대 스토리지 임계값을 설정해야한다.
할당된 용량에서 남은 공간이 10%미만이 되면 자동으로 수정한다.
스토리지 부족 상태가 5분 이상 지속되거나
지난 수정으로부터 6시간이 지났을 경우에
오토스케일링이 활성화 되어 있다면 스토리지가 자동 확장 된다.
워크로드를 예측할 수 없는 애플리케이션에서 유용하고 모든 RDS 데이터베이스 엔진에서 지원되는 기능이다. (MariaDB, MySql, PostgreSql, sql server oracle)


# RDS Read Replicas for read scalability
읽기 전용 복제본은 이름에서 알 수 있듯 읽기를 스케일링한다.
읽기전용 복제본은 최대 15개 까지 생성할 수 있으며
이들은 동일한 가용영역 또는 가용영역이나 리전을 걸쳐서 생성될 수 있다.
세가지 다른 옵션이 있다.

## 비동기식 복제
복제본을 비동기 식으로 복제한다.
비동기식이란 결국 읽기가 일관적으로 유지된다는 뜻
읽기 전용 복제본을 읽어들이면 모든 데이터를 얻을 수 있다는 것이다.
읽기 스케일링에 적합할 수 있으나 이를 데이터 베이스로도 승력 시켜 이용할 수 있다.
즉 이들 복제본 중 하나를
데이터베이스로 사용하고자 하며 권한을 주면 db로 승격 시킬 수 있다. 복제본은 복제 메커니즘을 탈피하며 자체적인 생애 주기를 갖는다.
읽기전용 복제본을 사용하려는 경우
화면상단의 주요 애플리케이션에 있는 모든 연결을 업데이트 해야한다.
