---
layout: post
title: AWS EC2 심화
subtitle: AWS ASS 준비 EC2 심화
categories: AWS
tags: [AWS, ASS, EC2]
date: 2023-04-19
---

# ec2 SAA 레벨

## private vs public ip

private -> 내부
public-> 외부

### public (공용)

공용 ip의 경우 기기가 인터넷에서 식별 될 수 있음을 의미함

공용 ip는 전체 웹에서 유니크하기 때문

ip로 지리적 위치를 쉽게 찾을 수 있다.

### pravate(사설)

사설 ip는

사설 네트워크 안에서만 식별될 수 있다.

사설 네트워크 안에서만 유효
두개의 회사는 같은 사설 ip를 가질 수 있다.

기기가 사설 네트워크에 있을때
NAT 장치와 프록시 역할을 할 인터넷 게이트웨이를 통해 인터넷에 연결됨

### Elastic IPs (탄력적 ip)

고정된 고정 ip
계정당 최대 5 개

## Placement Groups (배치 그룹)

ec2 인스턴스가 aws 인프라에 배치되는 방식을 제어하고자 할 때 사용

### 3가지 전략

### cluster-clusters

클러스터 배치그룹
단일 가용 영역 내에서 지연 시간이 짧은 하드웨어 설정으로 인스턴스를 그룹화할 클러스터 배치 그룹
높은 성능을 제공하지만 위험또한 높음

모든 EC2 인스턴스가 동일한 랙에 있다.
(동일한 하드웨어와 가용영역에 있다.)

-> 빠른 네트워크를 가지게 된다.
하지만 랙에 실패가 발생하면 모든 ec2인스턴스가 동시에 실패한다.

빅데이터 높은 네트워크 처리량을 위해서
사용

### spread-spreads

분산 배치 그룹은 인스턴스가 다른 하드웨어에 분산 된다는 의미

여기엔 가용 영역별로 분산된 배치 그룹당 7개의 ec2 인스턴스만 가질 수 있다는 제약이 있다.

크리티컬 애플리케이션이 있는 경우 분산 배치 그룹을 사용합니다.

분산 배치그룹은 실패 위험을 최소화

모든 하드웨어가 다른 하드웨어에 위치
여러 가용역역에 걸쳐 있을 수 있다.

크기가 적당하지만 너무 크지 않은 애플리케이션에서 사용

### partition-spreads

분할 배치 그룹

분산 배치 그룹과 비슷하게 인스턴스를 분산 하려는 것

다만 여러 파티션에 인스턴스가 분할되어 있고 이 파티션은 가용 영역 내의 다양한 하드 웨어 랙 세트에 의존

즉 인스턴스가 여전히 분산되어 있지만
다른 실패로 부터 격리되지 않음

하지만 파티션은 다른 오류파티션과 격리됨
즉 그룹당 수백 개의 ec2인스턴스를 통해 확장 할수 있고 이를 통해

Hadoop, cassandra, kafka 같은 애플리 케이션을 실행 할 수 있다.

가용 역영당 최대 7개의 파티션이 있을 수 있다. 각 파티션은 aws 랙을 의미

각 파티션은 다른 파티션과 격리되어 있음

하나의 파티션이 실패하면 다른 파티션은 영향을 받지 않음

## ENI (Elastic Network Interface)

탄력적 네트워크 인터페이스

vpc의 논리적 구성 요소이며 가상 네트워크 카드를 나타낸다.

ENI는 서브넷에 연결되어 있으며
private ip 주소를 가지고 있어 추가로 활용 가능

## EC2 Hibernate 모드 (절전 모드)

인스턴스를 중지하면
EBS 디스크 데이터는
다시 시작할 때까지 그대로 유지 됨

하지만 인스턴스를 종료하면 루트 볼륨이 삭제되게 했다면 인스턴스도 삭제된다.

절전모드는 인스턴스가 절전 모드가 되면 ram에 있던 인메모리 상태는 그대로 보존됨 부팅이 더 빨리된다.
운영체제를 완전히 중지하거나 종료하지 않았기 때문
절전모드가 되고 백그라운드에서
RAM에 기록되었던 인 메모리 상태는
루트 경로의 EBS볼륨에 기록되기 떄문에
루트 EBS 볼륨을 암호화 해야함

볼륨 용량도 RAM을 저장하기
충분해야 함

절전모드시 실행중인 인스턴스는 중지 상태로 전환되고 ram의 내용은 ebs볼륨에
덤프 된다.

그리고 인스턴스를 종료하면 ram이 사라진다.

ebs 볼륨에 ram을 덤프한게 있으니
인스턴스를 실행하면 다시 불러와 메모리로 가져와 인스턴스를 중지한 적이 없는것 처럼 된다.
